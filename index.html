<!DOCTYPE html>
<html>
<head>
  <title>Result Portal</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<h2>Student Result Portal</h2>

<input id="enroll" placeholder="Enter Enrollment No">
<button onclick="showResult()">Check Result</button>

<div id="result"></div>

<script src="data.js"></script>
<script>
function showResult() {
  let e = document.getElementById("enroll").value;
  let s = results.find(r => r.enrollment == e);

  if (!s) {
    document.getElementById("result").innerHTML = "Result not found";
    return;
  }

  let total = 0;

  let rows = s.subjects.map(sub => {
    let subTotal = sub.internal + sub.external;
    total += subTotal;
    return `
      <tr>
        <td>${sub.code}</td>
        <td>${sub.name}</td>
        <td>${sub.internal}</td>
        <td>${sub.external}</td>
        <td>${subTotal}</td>
      </tr>
    `;
  }).join("");

  document.getElementById("result").innerHTML = `
    <div class="header">
      <h2>INTELLECTUAL INSTITUTE OF MANAGEMENT & TECHNOLOGY</h2>
      <p><b>Semester Examination Result</b></p>
    </div>

    <p><b>Name:</b> ${s.name}</p>
    <p><b>Father's Name:</b> ${s.father}</p>
    <p><b>Enrollment No:</b> ${s.enrollment}</p>
    <p><b>Course:</b> ${s.course}</p>
    <p><b>Semester:</b> ${s.semester}</p>

    <table>
      <tr>
        <th>Code</th>
        <th>Subject</th>
        <th>Internal</th>
        <th>External</th>
        <th>Total</th>
      </tr>
      ${rows}
    </table>

    <h3>Grand Total: ${total}</h3>
    <h3>Result: ${s.result}</h3>

    <p>Date of Issue: ${new Date().toLocaleDateString()}</p>

    <br>
    <button onclick="window.print()">Download PDF</button>
  `;
}
</script>

</body>
</html>
